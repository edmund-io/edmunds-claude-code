# AI CLI Orchestrator V2 - Environment Configuration
# Copy this file to .env and fill in your values
#
# cp .env.v2.example .env
# nano .env
#

# ========================================================================
# SUPABASE CONFIGURATION (Required)
# ========================================================================

# Get these from your Supabase project settings
# https://app.supabase.com/project/_/settings/api

SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# ========================================================================
# REDIS CONFIGURATION
# ========================================================================

REDIS_URL=redis://redis:6379
REDIS_PASSWORD=
REDIS_DB=0

# ========================================================================
# BROWSER AUTOMATION SETTINGS
# ========================================================================

# Concurrency per worker (how many browsers in parallel)
WORKER_CONCURRENCY=2

# Headless mode (true for production, false for debugging)
HEADLESS_MODE=true

# Screenshot on error (for debugging)
SCREENSHOT_ON_ERROR=true

# Video recording (uses more resources)
VIDEO_RECORDING=false

# Session timeout (milliseconds)
SESSION_TIMEOUT=300000

# ========================================================================
# QUOTA TRACKING
# ========================================================================

# How often to check quotas (milliseconds)
QUOTA_CHECK_INTERVAL=60000

# Alert threshold (0.0 - 1.0, e.g. 0.9 = 90%)
QUOTA_ALERT_THRESHOLD=0.9

# Auto-scale workers based on queue size
AUTO_SCALE_ENABLED=false
AUTO_SCALE_MIN_WORKERS=1
AUTO_SCALE_MAX_WORKERS=5

# ========================================================================
# API GATEWAY SETTINGS
# ========================================================================

# API server port
API_PORT=3001

# Rate limits for external API
API_RATE_LIMIT_PER_MINUTE=100
API_RATE_LIMIT_PER_DAY=10000

# CORS allowed origins (comma-separated)
CORS_ALLOWED_ORIGINS=http://localhost:3000,https://your-domain.com

# ========================================================================
# WEBAPP SETTINGS
# ========================================================================

# Webapp port
WEBAPP_PORT=3000

# API URL for webapp
VITE_API_URL=http://localhost:3001

# ========================================================================
# PROVIDER-SPECIFIC SETTINGS
# ========================================================================

# ChatGPT
CHATGPT_DEFAULT_TIMEOUT=60000
CHATGPT_RETRY_ATTEMPTS=3

# Claude
CLAUDE_DEFAULT_TIMEOUT=60000
CLAUDE_RETRY_ATTEMPTS=3

# Gemini
GEMINI_DEFAULT_TIMEOUT=60000
GEMINI_RETRY_ATTEMPTS=3

# DeepSeek
DEEPSEEK_DEFAULT_TIMEOUT=60000
DEEPSEEK_RETRY_ATTEMPTS=3

# ========================================================================
# LOGGING & MONITORING
# ========================================================================

# Log level (debug, info, warn, error)
LOG_LEVEL=info

# Log format (json, pretty)
LOG_FORMAT=json

# Sentry DSN (optional, for error tracking)
SENTRY_DSN=

# ========================================================================
# SECURITY
# ========================================================================

# JWT secret for API authentication
JWT_SECRET=your-random-secret-here-change-this

# API key salt (for hashing)
API_KEY_SALT=your-random-salt-here-change-this

# Session encryption key
SESSION_ENCRYPTION_KEY=your-32-character-encryption-key

# ========================================================================
# ADVANCED SETTINGS
# ========================================================================

# Browser user data directory
BROWSER_USER_DATA_DIR=/app/sessions

# Screenshot directory
SCREENSHOT_DIR=/app/screenshots

# Video directory
VIDEO_DIR=/app/videos

# Proxy settings (optional)
# Format: http://username:password@proxy.example.com:8080
HTTP_PROXY=
HTTPS_PROXY=

# Anti-bot evasion
USE_STEALTH_MODE=true
RANDOMIZE_USER_AGENT=true
RANDOMIZE_VIEWPORT=true

# ========================================================================
# NOTIFICATIONS (Optional)
# ========================================================================

# Webhook URL for notifications
WEBHOOK_URL=

# Email notifications (requires SMTP)
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=
SMTP_FROM=noreply@example.com

# Slack webhook
SLACK_WEBHOOK_URL=

# ========================================================================
# BACKUP & MAINTENANCE
# ========================================================================

# Auto-backup sessions (hours)
AUTO_BACKUP_INTERVAL=24

# Session cleanup (delete expired sessions)
AUTO_CLEANUP_ENABLED=true
AUTO_CLEANUP_INTERVAL=3600000

# Database vacuum (Supabase handles this, but for local PG)
AUTO_VACUUM_ENABLED=false

# ========================================================================
# DEVELOPMENT / DEBUG
# ========================================================================

# Enable debug mode
DEBUG=false

# Development mode
NODE_ENV=production

# Expose additional ports for debugging
EXPOSE_DEBUG_PORTS=false

# ========================================================================
# NOTES
# ========================================================================

# Resource Requirements:
# - Minimum: 4GB RAM, 2 vCPU
# - Recommended: 8GB RAM, 4 vCPU
# - Optimal: 16GB RAM, 8 vCPU (for 10+ workers)

# Expected Capacity:
# - 3 workers × 2 concurrency = 6 parallel requests
# - ~10-30 requests/minute (depending on provider latency)
# - ~20K-40K requests/day

# Cost Estimate:
# - VPS (Hetzner CPX31): €11.90/month (~$13)
# - Supabase Free Tier: $0 (up to 500MB DB, 2GB bandwidth)
# - Supabase Pro (if needed): $25/month
# - Total: $13-38/month

# Free Tier Capacity with V2:
# - ChatGPT web: 10-60 messages/5hr × multiple accounts
# - Claude web: 40 messages/day × multiple accounts
# - Gemini web: 15 messages × multiple accounts
# - DeepSeek: Unlimited (fair-use)
# - Total: 100K+ requests/day at $0-20/month

# For more information, see:
# - SYSTEM_ARCHITECTURE_V2_OAUTH.md
# - BROWSER_AUTOMATION_RESEARCH.md
# - OAUTH_FREE_TIER_RESEARCH.md
